# 要件定義書: Copy Open Editors

**拡張機能名**: Copy Open Editors  
**対象プラットフォーム**: VS Code 1.99.0 以降（macOS / Windows / Linux）

---

## 1. 目的・背景

- **業務効率化**  
  VS Code で開いているタブの全てのファイル一覧を即座にクリップボードへコピーし、外部チャットやドキュメント共有を迅速化する。  
- **ミス削減**  
  手動でファイルパスを選択・コピーする煩雑さを排し、一貫性のあるパス取得を実現。

## 2. スコープ

| 区分                 | 内容                                                         |
|----------------------|--------------------------------------------------------------|
| **対象**             | TypeScript 製 VS Code 拡張機能                               |
| **MVP（最小実装）**  | 1. コマンド起動 → 2. QuickPick に開いているタブのファイル一覧表示<br>3. デフォルト全選択 → 4. クリップボードコピー → 5. 完了通知 |
| **対応バージョン**   | VS Code 1.99.0 以降                                   |
| **非対応**           | AI 直接送信機能、外部 API 呼び出し                            |

## 3. 利用者像（Persona）

- **ソフトウェアエンジニア**: 複数ファイルを AI チャットや議事録に貼り付けたい  
- **コードレビュアー**: 関連ファイル一覧を迅速に共有し、レビュー効率を高めたい

## 4. 機能要件（FR）

| ID      | 要件内容                                                                                           | 優先度 |
|---------|----------------------------------------------------------------------------------------------------|-------|
| FR-01   | `copyOpenEditors.copy` コマンドを登録                                                       | ★★★★★ |
| FR-02   | `window.createQuickPick` を利用し、`tabGroups.all` の相対パスを一覧表示                     | ★★★★★ |
| FR-03   | QuickPick は `canPickMany = true`、初期選択状態は全項目に `picked: true` を設定                   | ★★★★★ |
| FR-04   | Accept で選択済み項目を改行区切り文字列へ変換し、`env.clipboard.writeText` でクリップボードへ出力 | ★★★★★ |
| FR-05   | コピー成功時に `window.showInformationMessage` で「N 件コピー完了」を通知                         | ★★★★☆ |
| FR-06   | 開いているファイルが 0 件の場合、`window.showWarningMessage` で警告表示し処理を中断               | ★★★★☆ |

## 5. 非機能要件（NFR）

- **パフォーマンス**: 100 ファイル時でも QuickPick 表示まで 200 ms 以下  
- **信頼性**: 例外キャッチ → ユーザー通知 + `console.error` ログ  
- **セキュリティ**: クリップボード以外の外部通信なし  
- **拡張性**: 将来「フォルタリング」「AI 直接送信」対応を見据えたモジュール構造  
- **コード品質**: ESLint + Prettier + TypeScript strict モード

## 6. 画面／UI 仕様

| UI 要素     | 内容                                                                                     |
|-------------|------------------------------------------------------------------------------------------|
| QuickPick   | **タイトル**: `Select Open Tabs to Copy (default: all selected)`<br>**アイテム**:<br>- `label`: 相対パス<br>- `description`: 言語 ID<br>- `picked`: true |
| トースト    | `Copied {n} open tab paths to clipboard.` |
| 表示言語.   | UI表示言語は英語のみ、多言語対応はおこなわない。 |

## 7. 受け入れ基準

1. コマンド実行から 3 ステップ以内でクリップボードへのコピー完了まで到達できること  
2. QuickPick の初期状態で全ファイルが選択済みであること  
3. 全プラットフォーム（macOS／Windows／Linux）でテストスイートがすべてパスすること  
4. Marketplace への審査申請が受理されること
